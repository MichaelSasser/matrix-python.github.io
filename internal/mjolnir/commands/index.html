<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=https://matrix-python.github.io/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://matrix-python.github.io/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://matrix-python.github.io/fonts/KaTeX_Main-Regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=https://matrix-python.github.io/fonts/KaTeX_Math-Italic.woff2 type=font/woff2 crossorigin><script>(()=>{var b=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,a=localStorage.getItem("theme");b&&a===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),b&&a==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),a==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><link rel=stylesheet href=https://matrix-python.github.io/main.e184bbbbf9e2eac363aa639bb66c905029ef0b52cd54fcfa77310cec447f35fa9117862e920c0ebe2ac2e044af64d8ba3d164478e9d22dc6c666a3b097f25f35.css integrity="sha512-4YS7u/ni6sNjqmObtmyQUCnvC1LNVPz6dzEM7ER/NfqRF4YukgwOvirC4ESvZNi6PRZEeOnSLcbGZqOwl/JfNQ==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Commands - Matrix+Python</title><meta name=description content="The documentation about the moderation bot Mjölnir"><link rel=canonical href=https://matrix-python.github.io/internal/mjolnir/commands/><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="og:title" content="Commands"><meta property="og:description" content="The documentation about the moderation bot Mjölnir"><meta property="og:url" content="https://matrix-python.github.io/internal/mjolnir/commands/"><meta property="og:site_name" content="Matrix+Python"><meta property="article:modified_time" content="2021-12-14T06:42:12+01:00"><meta property="og:image" content="https://matrix-python.github.io/internal/mjolnir/commands/element_reason.jpeg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:site content><meta name=twitter:creator content><meta name=twitter:title content="Commands"><meta name=twitter:description content="The documentation about the moderation bot Mjölnir"><meta name=twitter:image content="https://matrix-python.github.io/internal/mjolnir/commands/element_reason.jpeg"><meta name=twitter:image:alt content="Commands"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Organization","@id":"https://matrix-python.github.io/#/schema/organization/1","name":"Matrix\u002bPython","url":"https://matrix-python.github.io/","sameAs":["https://github.com/matrix-python/"],"logo":{"@type":"ImageObject","@id":"https://matrix-python.github.io/#/schema/image/1","url":"https://matrix-python.github.io/","width":512,"height":512,"caption":"Matrix\u002bPython"},"image":{"@id":"https://matrix-python.github.io/#/schema/image/1"}},{"@type":"WebSite","@id":"https://matrix-python.github.io/#/schema/website/1","url":"https://matrix-python.github.io/","name":"Matrix\u002bPython","description":"We are the Python community on matrix, a free and open network for secure, decentralized communication.","publisher":{"@id":"https://matrix-python.github.io/#/schema/organization/1"}},{"@type":"WebPage","@id":"https://matrix-python.github.io/internal/mjolnir/commands/","url":"https://matrix-python.github.io/internal/mjolnir/commands/","name":"Commands","description":"The documentation about the moderation bot Mjölnir","isPartOf":{"@id":"https://matrix-python.github.io/#/schema/website/1"},"about":{"@id":"https://matrix-python.github.io/#/schema/organization/1"},"datePublished":"0001-01-01T00:00:00CET","dateModified":"2021-12-14T06:42:12CET","breadcrumb":{"@id":"https://matrix-python.github.io/internal/mjolnir/commands/#/schema/breadcrumb/1"},"primaryImageOfPage":{"@id":"https://matrix-python.github.io/internal/mjolnir/commands/#/schema/image/2"},"inLanguage":"en-US","potentialAction":[{"@type":"ReadAction","target":["https://matrix-python.github.io/internal/mjolnir/commands/"]}]},{"@type":"BreadcrumbList","@id":"https://matrix-python.github.io/internal/mjolnir/commands/#/schema/breadcrumb/1","name":"Breadcrumbs","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":"https://matrix-python.github.io/","url":"https://matrix-python.github.io/","name":"Home"}},{"@type":"ListItem","position":2,"item":{"@type":"WebPage","@id":"https://matrix-python.github.io/internal/","url":"https://matrix-python.github.io/internal/","name":"Internal"}},{"@type":"ListItem","position":3,"item":{"@type":"WebPage","@id":"https://matrix-python.github.io/internal/mjolnir/","url":"https://matrix-python.github.io/internal/mjolnir/","name":"Mjolnir"}},{"@type":"ListItem","position":4,"item":{"@id":"https://matrix-python.github.io/internal/mjolnir/commands/"}}]},{"@context":"https://schema.org","@graph":[{"@type":"ImageObject","@id":"https://matrix-python.github.io/internal/mjolnir/commands/#/schema/image/2","url":null,"contentUrl":null,"caption":"Commands"}]}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=https://matrix-python.github.io/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://matrix-python.github.io/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://matrix-python.github.io/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=https://matrix-python.github.io/site.webmanifest></head><body class="internal single"><div class="alert alert-primary text-center" role=alert>Coming soon &mdash; This website is under development.</div><div class=sticky-lg-top><div class=header-bar></div><header class="navbar navbar-expand-md navbar-light doks-navbar"><nav class="container-xxl flex-wrap flex-md-nowrap" aria-label="Main navigation"><a class="navbar-brand p-0 me-auto" href=/ aria-label=Matrix+Python>Matrix+Python</a>
<button class="btn btn-menu d-block d-md-none order-5" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasDoks aria-controls=offcanvasDoks aria-label="Open main menu"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="offcanvas offcanvas-start border-0 py-md-1" tabindex=-1 id=offcanvasDoks data-bs-backdrop=true aria-labelledby=offcanvasDoksLabel><div class="header-bar d-md-none"></div><div class="offcanvas-header d-md-none"><h2 class="h5 offcanvas-title ps-2" id=offcanvasDoksLabel><a class=text-dark href=/>Matrix+Python</a></h2><button type=button class="btn-close text-reset me-2" data-bs-dismiss=offcanvas aria-label="Close main menu"></button></div><div class="offcanvas-body px-4"><h3 class="h6 text-uppercase mb-3 d-md-none">Main</h3><ul class="nav flex-column flex-md-row ms-md-n3"><li class=nav-item><a class="nav-link ps-0 py-1" href=/>Home</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/docs/prologue/introduction/>Docs</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/blog/>Blog</a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=/about/>About</a></li></ul><hr class="text-black-50 my-4 d-md-none"><h3 class="h6 text-uppercase mb-3 d-md-none">Socials</h3><ul class="nav flex-column flex-md-row ms-md-auto me-md-n5 pe-md-2"><li class=nav-item><a class="nav-link ps-0 py-1" href=https://matrix.to/#/#python-community:matrix.org><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="-32 -27.2 64 54.3" fill="currentcolor" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M-30.6-25.9v51.8h3.7v1.2H-32v-54.3h5.2v1.2L-30.6-25.9zM-9.8-9.5v2.6h.1c.7-1 1.5-1.8 2.5-2.3S-5.1-10-3.8-10c1.2.0 2.3.2 3.4.7S1.4-8 1.9-6.8C2.5-7.6 3.2-8.4 4.2-9s2.2-1 3.5-1c1 0 2 .1 2.8.4s1.6.6 2.2 1.2 1.1 1.3 1.5 2.2.5 2 .5 3.2v13H9.5V-1L9.4-2.9C9.4-3.5 9.2-4 9-4.4s-.6-.8-1-1S7-5.8 6.2-5.8 4.9-5.7 4.4-5.4C4-5.1 3.6-4.7 3.3-4.3c-.3.5-.4 1-.5 1.6S2.7-1.5 2.7-.9V9.9h-5.3V-1-2.7c0-.6-.1-1.1-.3-1.6s-.5-.9-.9-1.1S-5-5.8-5.9-5.8c-.2.0-.6.1-1 .2C-7.3-5.5-7.7-5.3-8.1-5s-.7.8-1 1.4-.4 1.4-.4 2.3V9.9h-5.3V-9.5h5zM30.6 25.9v-51.8h-3.7v-1.2H32v54.3h-5.2V26h3.8z"/></svg><small class="ms-2 d-md-none">Matrix</small></a></li><li class=nav-item><a class="nav-link ps-0 py-1" href=https://github.com/matrix-python/><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><small class="ms-2 d-md-none">GitHub</small></a></li></ul></div></div><button id=mode class="btn btn-link order-md-1" type=button aria-label="Toggle user interface mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button></nav></header></div><div class="wrap container-xxl" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar d-none d-lg-block"><nav class=docs-links aria-label="Main navigation"><h3>Documentaion</h3><ul class=list-unstyled><li><a class=docs-link href=/internal/documentation/about/>About this documentation</a></li></ul><h3>Mjölnir</h3><ul class=list-unstyled><li><a class=docs-link href=/internal/mjolnir/oveview/>Overview</a></li><li><a class="docs-link active" href=/internal/mjolnir/commands/>Commands</a></li><li><a class=docs-link href=/internal/mjolnir/examples/>Examples</a></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><div class=sidebar-actions><p><a href=/internal/index.xml><i class="fas fa-rss-square"></i>
RSS</a></p><p><a href=https://github.com/matrix-python/matrix-python.github.io/blob/master/content/internal/mjolnir/commands/index.md><i class="fab fa-github"></i>
Edit this Page</a></p><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#mjölnir-commands>Mjölnir Commands</a><ul><li><a href=#command-reference>Command Reference</a></li><li><a href=#prefixes>Prefixes</a></li><li><a href=#list-shortcodes>List Shortcodes</a></li><li><a href=#reason>Reason</a></li><li><a href=#globbing>Globbing</a></li><li><a href=#protections>Protections</a></li><li><a href=#power-level>Power Level</a></li><li><a href=#all-commands>All Commands</a></li></ul></li></ul></nav></div></div></nav><main class="docs-content col-lg-11 col-xl-9"><h1>Commands</h1><p class=lead>The documentation about the moderation bot Mjölnir</p><nav class=d-xl-none aria-label="Quaternary navigation"><div class=page-links><div class=sidebar-actions><p><a href=/internal/index.xml><i class="fas fa-rss-square"></i>
RSS</a></p><p><a href=https://github.com/matrix-python/matrix-python.github.io/blob/master/content/internal/mjolnir/commands/index.md><i class="fab fa-github"></i>
Edit this Page</a></p><h3>On this page</h3><nav id=TableOfContents><ul><li><a href=#mjölnir-commands>Mjölnir Commands</a><ul><li><a href=#command-reference>Command Reference</a></li><li><a href=#prefixes>Prefixes</a></li><li><a href=#list-shortcodes>List Shortcodes</a></li><li><a href=#reason>Reason</a></li><li><a href=#globbing>Globbing</a></li><li><a href=#protections>Protections</a></li><li><a href=#power-level>Power Level</a></li><li><a href=#all-commands>All Commands</a></li></ul></li></ul></nav></div></div></nav><div class="bd-callout bd-callout-danger alert-warning" role=alert><h5>❌ <b>Danger</b></h5><br><br><div>Keep in mind, some of the commands listed below can do a massive
amount of damage with just a single command!<br>Do not run any command, if
you don&rsquo;t know what it does. Make sure to read this documentation thoroughly
before using the bot.</div></div><h2 id=mjölnir-commands>Mjölnir Commands<a href=#mjölnir-commands class=anchor aria-hidden=true>#</a></h2><p>To run a Mjölnir command, make sure you are in the Mjölnir command and control
room.</p><div class="bd-callout bd-callout-info alert-warning" role=alert><h5>💡 <b>Note</b>: Access to the Command and Control Room</h5><br><br><div>If you don&rsquo;t
have access to the room Mjölnir command and control room, please contact
<a href=https://matrix-python.github.io/contributors/michael-sasser/>Michael</a>.</div></div><p>Every command starts with a <code>prefix</code> Mjölnir accepts, see
<a href=#prefixes>Prefixes →</a><br>Followed by the <code>command</code>, see
<a href=#command-reference>Command Reference →</a><br>The arguments after that depend
on the command which was used.</p><table><thead><tr><th>Argument Placeholder</th><th>Description</th></tr></thead><tbody><tr><td><code>&lt;list shortcode></code></td><td>See <a href=#list-shortcode>List Shortcode →</a></td></tr><tr><td><code>&lt;user></code></td><td>(Short for <code>&lt;user ID></code>)</td></tr><tr><td><code>&lt;room></code></td><td>The room identidier of the room e.g. <code>#room:domain.tld</code></td></tr><tr><td><code>&lt;server></code></td><td>The homeserver e.g. <code>domain.tld</code></td></tr><tr><td><code>&lt;glob></code></td><td>See <a href=#globbing>Globbing →</a></td></tr><tr><td><code>[reason]</code></td><td>See <a href=#reason>Reason →</a></td></tr><tr><td><code>&lt;user ID></code></td><td>The user identifier of the user e.g. <code>@user:domain.tld</code></td></tr><tr><td><code>[room alias/ID]</code></td><td>The room alias e.g. <code>RoomName</code> or identifier e.g. <code>#room:domain.tld</code></td></tr><tr><td><code>[limit]</code></td><td>A limit as <code>integer</code> to limit the number of actions</td></tr><tr><td><code>&lt;event permalink></code></td><td>A permalink to an event e.g. <code>$ECDPZSedVRUbAxsy0V-pHK5JIwGrO-XZsIo3m5zX-rI</code></td></tr><tr><td><code>&lt;alias localpart></code></td><td>For example <code>roomname</code> of <code>#roomname:domain.tld</code></td></tr><tr><td><code>&lt;shortcode></code></td><td>(Short for <code>&lt;list shortcode></code>)</td></tr><tr><td><code>&lt;protection></code></td><td>See <a href=#protections>Protections →</a></td></tr><tr><td><code>&lt;target room alias/ID></code></td><td>The room identifier of the target room e.g. <code>#room:domain.tld</code></td></tr><tr><td><code>[message]</code></td><td>A message as string</td></tr><tr><td><code>&lt;power level></code></td><td>See <a href=#power-level>Power Level →</a></td></tr></tbody></table><h3 id=command-reference>Command Reference<a href=#command-reference class=anchor aria-hidden=true>#</a></h3><p>These are the typical commands we use on a day-to-day basis. The prefix, that
is used in this documentation is <code>mjolnir</code>.</p><table><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td><code>mjolnir status</code></td><td>Print status information</td></tr><tr><td><code>mjolnir ban &lt;list shortcode> &lt;user> &lt;glob> [reason]</code></td><td>Adds an entity to the ban list</td></tr><tr><td><code>mjolnir unban &lt;list shortcode> &lt;user> &lt;glob> [apply]</code></td><td>Removes an entity from the ban list. If apply is &lsquo;true&rsquo;, the users matching the glob will actually be unbanned</td></tr><tr><td><code>mjolnir redact &lt;user ID> [room alias/ID] [limit]</code></td><td>Redacts messages by the sender in the target room (or all rooms), up to a maximum number of events in the backlog (default 1000)</td></tr><tr><td><code>mjolnir redact &lt;event permalink></code></td><td>Redacts a message by permalink</td></tr><tr><td><code>mjolnir kick &lt;user ID> [room alias/ID] [reason]</code></td><td>Kicks a user in a particular room or all protected rooms</td></tr><tr><td><code>mjolnir rules</code></td><td>Lists the rules currently in use by Mjolnir</td></tr><tr><td><code>mjolnir help</code></td><td>This menu</td></tr></tbody></table><p>For more commands, use the command <code>mjolnir help</code> or see
<a href=#all-commands>All Commands →</a></p><h3 id=prefixes>Prefixes<a href=#prefixes class=anchor aria-hidden=true>#</a></h3><p>Every command starts with a prefix Mjölnir accepts.</p><ul><li><code>!mjolnir</code> (default)</li><li><code>mjolnir</code></li></ul><div class="bd-callout bd-callout-info alert-warning" role=alert><h5>💡 <b>Note</b>: Adding/Removing Prefixes</h5><br><br><div>Prefixes can only be added or
removed during the deployment of Mjölnir. If you want to change the list of
reasons, please contact <a href=https://matrix-python.github.io/contributors/michael-sasser/>Michael</a>.</div></div><h3 id=list-shortcodes>List Shortcodes<a href=#list-shortcodes class=anchor aria-hidden=true>#</a></h3><p>A <em>list shortcode</em> describes a short name for a room, which contains rules
about banned users, rooms or servers. Even though most rooms like this are
publicly readable only some users have the permissions to send some events to
those rooms.<br>This means, by default, all users joining the room are
muted.</p><p>The list shortcodes we use, are in the following table. The permissions column
describes, the power level Mjölnir has in that room.</p><table><thead><tr><th>List Shortcode</th><th>Power Level</th><th>Description</th></tr></thead><tbody><tr><td><code>coc</code></td><td><code>100</code></td><td>Shortcut for the Code of Conduct ban list</td></tr></tbody></table><p>Mjölnir can subscribe to lists or create new ones. When a user/room/server gets
added to a list, all subscribing instances of Mjölnir, immediately ban that
user, blacklist the room for local users (if Mjölnir is a homeserver
administrator and is configured that way) or sets room ACLs for the server.</p><p>Those actions are taken for every room a Mjolnir protects. When a user is not
in a room, Mjölnir will not ban the user right away. When a user joins a room
or, depending on the configuration, is invited to a room Mjölnir protects, it
checks, if a (ban) rule for that user exists. If the rule exists, Mjölnir takes
actions.</p><p>For more information about the power level, see <a href=#power-level>Power Level →</a></p><h4 id=room-reference>Room Reference<a href=#room-reference class=anchor aria-hidden=true>#</a></h4><p>The table below describes which list shortcode describes which room.</p><table><thead><tr><th>List Shortcode</th><th>Room</th></tr></thead><tbody><tr><td><code>coc</code></td><td><div class=pill-wrapper><a href=https://app.element.io/#/user/%23code-of-conduct-bans%3amichaelsasser.org><svg class="pill-img" xmlns="http://www.w3.org/2000/svg" viewBox="-64 -54.4 128 108.6" width="25" height="25" fill="currentcolor" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M-30.6-25.9v51.8h3.7v1.2H-32v-54.3h5.2v1.2L-30.6-25.9zM-9.8-9.5v2.6h.1c.7-1 1.5-1.8 2.5-2.3S-5.1-10-3.8-10c1.2.0 2.3.2 3.4.7S1.4-8 1.9-6.8C2.5-7.6 3.2-8.4 4.2-9s2.2-1 3.5-1c1 0 2 .1 2.8.4s1.6.6 2.2 1.2 1.1 1.3 1.5 2.2.5 2 .5 3.2v13H9.5V-1L9.4-2.9C9.4-3.5 9.2-4 9-4.4s-.6-.8-1-1S7-5.8 6.2-5.8 4.9-5.7 4.4-5.4C4-5.1 3.6-4.7 3.3-4.3c-.3.5-.4 1-.5 1.6S2.7-1.5 2.7-.9V9.9h-5.3V-1-2.7c0-.6-.1-1.1-.3-1.6s-.5-.9-.9-1.1S-5-5.8-5.9-5.8c-.2.0-.6.1-1 .2C-7.3-5.5-7.7-5.3-8.1-5s-.7.8-1 1.4-.4 1.4-.4 2.3V9.9h-5.3V-9.5h5zM30.6 25.9v-51.8h-3.7v-1.2H32v54.3h-5.2V26h3.8z"/></svg><span class=pill>&nbsp;#code-of-conduct-bans:michaelsasser.org</span></a></div></td></tr></tbody></table><h3 id=reason>Reason<a href=#reason class=anchor aria-hidden=true>#</a></h3><p>A <code>reason</code> is a messages e.g. for a user, explaining the reason, why the user
that gets banned. This represents the same as the <code>reason</code> field used during
kicking or banning.</p><figure class=border-0><img class="img-fluid lazyload blur-up" id=zoom-default data-sizes=auto src=/internal/mjolnir/commands/element_reason_hu6f4df0aa6d5ae7fb4f7d5ac178446882_33489_20x0_resize_q75_box.jpeg data-srcset="https://matrix-python.github.io/internal/mjolnir/commands/element_reason_hu6f4df0aa6d5ae7fb4f7d5ac178446882_33489_900x0_resize_q75_box.jpeg 900w,https://matrix-python.github.io/internal/mjolnir/commands/element_reason_hu6f4df0aa6d5ae7fb4f7d5ac178446882_33489_800x0_resize_q75_box.jpeg 800w,https://matrix-python.github.io/internal/mjolnir/commands/element_reason_hu6f4df0aa6d5ae7fb4f7d5ac178446882_33489_700x0_resize_q75_box.jpeg 700w,https://matrix-python.github.io/internal/mjolnir/commands/element_reason_hu6f4df0aa6d5ae7fb4f7d5ac178446882_33489_600x0_resize_q75_box.jpeg 600w,https://matrix-python.github.io/internal/mjolnir/commands/element_reason_hu6f4df0aa6d5ae7fb4f7d5ac178446882_33489_500x0_resize_q75_box.jpeg 500w" width=1123 height=466 alt="element reason"><noscript><img class="img-fluid zoom-default" id=zoom-default sizes=100vw srcset="https://matrix-python.github.io/internal/mjolnir/commands/element_reason_hu6f4df0aa6d5ae7fb4f7d5ac178446882_33489_900x0_resize_q75_box.jpeg 900w,https://matrix-python.github.io/internal/mjolnir/commands/element_reason_hu6f4df0aa6d5ae7fb4f7d5ac178446882_33489_800x0_resize_q75_box.jpeg 800w,https://matrix-python.github.io/internal/mjolnir/commands/element_reason_hu6f4df0aa6d5ae7fb4f7d5ac178446882_33489_700x0_resize_q75_box.jpeg 700w,https://matrix-python.github.io/internal/mjolnir/commands/element_reason_hu6f4df0aa6d5ae7fb4f7d5ac178446882_33489_600x0_resize_q75_box.jpeg 600w,https://matrix-python.github.io/internal/mjolnir/commands/element_reason_hu6f4df0aa6d5ae7fb4f7d5ac178446882_33489_500x0_resize_q75_box.jpeg 500w" src=/internal/mjolnir/commands/element_reason.jpeg width=1123 height=466 alt="element reason"></noscript><figcaption class=figure-caption><center><em>Element Client: Reason for banning a user</em></center></figcaption></figure><p>For some <em>reasons</em> Mjölnir can automatically redact (delete) the latest
messages of a user. Mjölnir currently redacts for the following reasons:</p><ul><li><code>spam</code></li><li><code>advertising</code></li><li><code>advertisement</code></li><li><code>ad</code></li></ul><p>Every other reason will not be redacted.</p><p>Reasons can only be added or removed during the deployment of Mjölnir. If you
want to change the list of reasons, please contact
<a href=https://matrix-python.github.io/contributors/michael-sasser/>Michael</a>.</p><h3 id=globbing>Globbing<a href=#globbing class=anchor aria-hidden=true>#</a></h3><div class="bd-callout bd-callout-danger alert-warning" role=alert><h5>❌ <b>Danger</b>: Globbing Warning</h5><br><br><div>Globbing means dangerous business.
Be aware of the effects this might have beforehand!<br>Keep in mind, that
this not only affect users, which are currently a part of the community. It
will affect users, who will join the community in the future, too.</div></div><p>Globbing describes an ellipsis, or wildcard placeholder, which enables a
feature of Mjölnir to moderate every user who fits that pattern.</p><p>For example, you want to ban every user whose user ID starts with <code>spammer</code> and
is registered on the <code>matrix.org</code> homeserver:</p><pre><code class=language-text>mjolnir ban coc @spam*:matrix.org spam --force`
</code></pre><p>Now, every user who fits that pattern will be banned. For example,
<code>@spam123:matrix.org</code>, <code>@spamabc:matrix.org</code> or <code>@spam:matrix.org</code>. The
<code>--force</code> argument is needed to tell Mjölnir that you really know, what you are
about to do.</p><h3 id=protections>Protections<a href=#protections class=anchor aria-hidden=true>#</a></h3><p>Mjölnir offers automatism to some extent, which means, it can perform curtain
tasks on its own. Those tasks are called <code>protections</code>. The available
protections are listed below with their current status.</p><table><thead><tr><th>Protection</th><th>Status</th></tr></thead><tbody><tr><td><code>FirstMessageIsImageProtection</code></td><td>disabled</td></tr><tr><td><code>BasicFloodingProtection</code></td><td>enabled</td></tr><tr><td><code>WordList</code></td><td>enabled</td></tr><tr><td><code>MessageIsVoiceProtection</code></td><td>disabled</td></tr></tbody></table><div class="bd-callout bd-callout-info alert-warning" role=alert><h5>💡 <b>Note</b>: Protections</h5><br><br><div>None of the above listed protections are
publishing the ban to any ban lists.</div></div><p>Even though, protections can be enabled/disabled from the <em>Command and Control
Room</em>, settings cannot.</p><h4 id=firstmessageisimageprotection>FirstMessageIsImageProtection<a href=#firstmessageisimageprotection class=anchor aria-hidden=true>#</a></h4><p>If the first thing a user does after joining is to post an image or video,
they&rsquo;ll be banned for spam</p><h4 id=basicfloodingprotection>BasicFloodingProtection<a href=#basicfloodingprotection class=anchor aria-hidden=true>#</a></h4><p>When a user posts ≥ 10 <code>m.room.message</code> events (messages not lines) in 60
seconds they&rsquo;ll be banned for spam with the same conditions as described above.</p><h4 id=wordlist>WordList<a href=#wordlist class=anchor aria-hidden=true>#</a></h4><p>When an event occurs (e.g. someone writes a message), and the user who created
the event is in that room for less then 40 minutes, the bot checks
<code>content.body</code> for keywords which are on the bad-word blacklist. If the bot
finds a match (regex), it will ban the user for spam, but only in the room the
user was creating that event. Likewise, it redacts (&ldquo;deletes&rdquo;) the event
<code>m.room.message</code> with an event <code>m.room.redaction</code> without adding the user to
our &ldquo;code of conduct&rdquo; blacklist.</p><p><a href=https://matrix-python.github.io/contributors/michael-sasser/>Michael</a> then reviews the redacted
messages manually and unbans the user, in case it was a false-positive ban or
instruct the bot to add the user to &ldquo;code of conduct&rdquo; blacklist. When the time
is above 40 minute mark, the bot &ldquo;trusts&rdquo; the user and ignores that users
<code>content.body</code>.</p><p>Currently, the following words are on the bad-word blacklist:</p><p><strong>Sorry for that in advance!!</strong></p><ul><li>thegreatwhitebrotherhood</li><li>geeksforgeeks</li><li>https://t.me/</li><li>https://discord.gg/</li><li>nigger</li><li>hitler</li><li>sexo</li><li>faggot</li><li>fag</li><li>homo</li><li>nigga</li><li>penis</li><li>blowjob</li><li>vagina</li><li>cunt</li><li>cock</li><li>coon</li><li>anus</li></ul><div class="bd-callout bd-callout-info alert-warning" role=alert><h5>💡 <b>Note</b>: Changing Settings</h5><br><br><div>Changing settings or modifying words
can only be done during the deployment of Mjölnir. If you want to change
anything, please contact <a href=https://matrix-python.github.io/contributors/michael-sasser/>Michael</a>.</div></div><h4 id=messageisvoiceprotection>MessageIsVoiceProtection<a href=#messageisvoiceprotection class=anchor aria-hidden=true>#</a></h4><p>Because voice messages cannot be disabled, the bot redacts every voice message
without any side effect for the user (no kicking or banning)</p><h3 id=power-level>Power Level<a href=#power-level class=anchor aria-hidden=true>#</a></h3><p>Power levels are used in the room permission system. Every new user starts with
a power level of <code>0</code> (default setting).</p><p>The table below shows the named power levels of a room, which uses the default
settings.</p><table><thead><tr><th>Power Level</th><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code>100</code></td><td>Administrator</td><td></td></tr><tr><td><code>50</code></td><td>Moderator</td><td></td></tr><tr><td><code>0</code></td><td>Default</td><td>what every new user gets</td></tr><tr><td><code>-1</code></td><td>Muted</td><td>The user cannot write messages, but can still send <code>reactions</code></td></tr></tbody></table><h3 id=all-commands>All Commands<a href=#all-commands class=anchor aria-hidden=true>#</a></h3><div class="bd-callout bd-callout-info alert-warning" role=alert><h5>💡 <b>Note</b></h5><br><br><div>Some of the following commands cannot be used with this instance
of Mjölnir because it is no longer a homeserver administrator.</div></div><table><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td><code>mjolnir</code></td><td>Print status information</td></tr><tr><td><code>mjolnir status</code></td><td>Print status information</td></tr><tr><td><code>mjolnir ban &lt;list shortcode> &lt;user|room|server> &lt;glob> [reason]</code></td><td>Adds an entity to the ban list</td></tr><tr><td><code>mjolnir unban &lt;list shortcode> &lt;user|room|server> &lt;glob> [apply]</code></td><td>Removes an entity from the ban list. If apply is &lsquo;true&rsquo;, the users matching the glob will actually be unbanned</td></tr><tr><td><code>mjolnir redact &lt;user ID> [room alias/ID] [limit]</code></td><td>Redacts messages by the sender in the target room (or all rooms), up to a maximum number of events in the backlog (default 1000)</td></tr><tr><td><code>mjolnir redact &lt;event permalink></code></td><td>Redacts a message by permalink</td></tr><tr><td><code>mjolnir kick &lt;user ID> [room alias/ID] [reason]</code></td><td>Kicks a user in a particular room or all protected rooms</td></tr><tr><td><code>mjolnir rules</code></td><td>Lists the rules currently in use by Mjolnir</td></tr><tr><td><code>mjolnir sync</code></td><td>Force updates of all lists and re-apply rules</td></tr><tr><td><code>mjolnir verify</code></td><td>Ensures Mjolnir can moderate all your rooms</td></tr><tr><td><code>mjolnir list create &lt;shortcode> &lt;alias localpart></code></td><td>Creates a new ban list with the given shortcode and alias</td></tr><tr><td><code>mjolnir watch &lt;room alias/ID></code></td><td>Watches a ban list</td></tr><tr><td><code>mjolnir unwatch &lt;room alias/ID></code></td><td>Unwatches a ban list</td></tr><tr><td><code>mjolnir import &lt;room alias/ID> &lt;list shortcode></code></td><td>Imports bans and ACLs into the given list</td></tr><tr><td><code>mjolnir default &lt;shortcode></code></td><td>Sets the default list for commands</td></tr><tr><td><code>mjolnir deactivate &lt;user ID></code></td><td>Deactivates a user ID</td></tr><tr><td><code>mjolnir protections</code></td><td>List all available protections</td></tr><tr><td><code>mjolnir enable &lt;protection></code></td><td>Enables a particular protection</td></tr><tr><td><code>mjolnir disable &lt;protection></code></td><td>Disables a particular protection</td></tr><tr><td><code>mjolnir rooms</code></td><td>Lists all the protected rooms</td></tr><tr><td><code>mjolnir rooms add &lt;room alias/ID></code></td><td>Adds a protected room (may cause high server load)</td></tr><tr><td><code>mjolnir rooms remove &lt;room alias/ID></code></td><td>Removes a protected room</td></tr><tr><td><code>mjolnir move &lt;room alias> &lt;room alias/ID></code></td><td>Moves a <room alias>to a new <room id></td></tr><tr><td><code>mjolnir directory add &lt;room alias/ID></code></td><td>Publishes a room in the server&rsquo;s room directory</td></tr><tr><td><code>mjolnir directory remove &lt;room alias/ID></code></td><td>Removes a room from the server&rsquo;s room directory</td></tr><tr><td><code>mjolnir alias add &lt;room alias> &lt;target room alias/ID></code></td><td>Adds <room alias>to <target room></td></tr><tr><td><code>mjolnir alias remove &lt;room alias></code></td><td>Deletes the room alias from whatever room it is attached to</td></tr><tr><td><code>mjolnir resolve &lt;room alias></code></td><td>Resolves a room alias to a room ID</td></tr><tr><td><code>mjolnir shutdown room &lt;room alias/ID> [message]</code></td><td>Uses the bot&rsquo;s account to shut down a room, preventing access to the room on this server</td></tr><tr><td><code>mjolnir powerlevel &lt;user ID> &lt;power level> [room alias/ID]</code></td><td>Sets the power level of the user in the specified room (or all protected rooms)</td></tr><tr><td><code>mjolnir help</code></td><td>This menu</td></tr></tbody></table><p class=edit-page><a href=https://github.com/matrix-python/matrix-python.github.io/blob/master/content/internal/mjolnir/commands/index.md><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2"><path d="M17 3a2.828 2.828.0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>Edit this page on GitHub</a></p><div class=blog-navigation><div class=row><div class=col-lg><div class=card><div class=card-body><a class=stretched-link href=/internal/mjolnir/oveview/></a><table><tr><td class=glyph rowspan=2><i class="fas fa-arrow-left"></i></td><td class="next-prev text-muted right">Internal Documentation &ndash; Previous</td></tr><tr><td class="title right">Overview</td></tr><tr></tr></table></div></div></div><div class=col-lg><div class=card><div class=card-body><a class=stretched-link href=/internal/mjolnir/examples/></a><table><tr><td class="next-prev text-muted left">Next &ndash;
Internal Documentation</td><td class=glyph rowspan=2><i class="fas fa-arrow-right"></i></td></tr><tr><td class="title left">Examples</td></tr><tr></tr></table></div></div></div></div></div></main></div></div></div><footer class=footer><div class=container-xxl><div class="row row-cols-8 py-3 my-3"><div class=col-lg-6><h2>Matrix+Python</h2><p class="text-muted link-dark">Designed by the Python Community on Matrix<br>team with the help of our <a href=/contributors>contributors</a> ❤️.<br>Based on <a href=https://getdoks.org/ target=_blank rel="license noopener">Doks</a>, built with <a href=https://gohugo.io/ target=_blank rel="license noopener">Hugo</a>.<br>Code licensed <a href=https://github.com/matrix-python/matrix-python.github.io/blob/master/LICENSE.md target=_blank rel="license noopener">MIT</a>, docs <a href=https://github.com/matrix-python/matrix-python.github.io/blob/master/LICENSE_DOCS.md target=_blank rel="license noopener">CC BY 4.0</a>.</p></div><div class=col-lg-2></div><div class=col><h5>Links</h5><ul class="nav flex-column"><li class="nav-item mb-2 m-0"><a class="nav-link p-0 text-muted" href=/>Home</a></li><li class="nav-item mb-2 m-0"><a class="nav-link p-0 text-muted" href=/docs/prologue/introduction/>Docs</a></li><li class="nav-item mb-2 m-0"><a class="nav-link p-0 text-muted" href=/blog/>Blog</a></li><li class="nav-item mb-2 m-0"><a class="nav-link p-0 text-muted" href=/about/>About</a></li></ul></div><div class=col><h5>Docs</h5><ul class="nav flex-column"><li class="nav-item mb-2 m-0"><a class="nav-link p-0 text-muted" href=/docs/prologue/introduction>Introduction</a></li><li class="nav-item mb-2 m-0"><a class="nav-link p-0 text-muted" href=/docs/tutorial/about_this_tutorial>Tutorial</a></li><li class="nav-item mb-2 m-0"><a class="nav-link p-0 text-muted" href=/docs/help/faq>FAQ</a></li></ul></div><div class=col><h5>Contact</h5><ul class="nav flex-column"><li class="nav-item mb-2 m-0"><a class="nav-link p-0 text-muted" href=/contributors/>Contributors</a></li><li class="nav-item mb-2 m-0"><a class="nav-link p-0 text-muted" href=/docs/code_of_conduct/>Code of Conduct</a></li><li class="nav-item mb-2 m-0"><a class="nav-link p-0 text-muted" href=/privacy-policy/gdpr/>GDPR</a></li><li class="nav-item mb-2 m-0"><a class="nav-link p-0 text-muted" href=/privacy-policy/imprint/>Imprint</a></li></ul></div></div></div></footer><script src=/js/bootstrap.min.592b9faf6c83a2bda564a377cf82f9a67546b198510a93fdb0728f9622ec22729d44be02fb2ea16c3fe5365ae1806259cd111932ca28e68b66462d6937635bab.js integrity="sha512-WSufr2yDor2lZKN3z4L5pnVGsZhRCpP9sHKPliLsInKdRL4C+y6hbD/lNlrhgGJZzREZMsoo5otmRi1pN2Nbqw==" crossorigin=anonymous defer></script>
<script src=/js/highlight.min.88df7ec5d9693ad9d3c4f131a6974c6b0d00561526e939ea196b4f198ecdcfbac25d69d58367fde8df923823110dba6d1a7eabe44b7ea52559e92d0751b17869.js integrity="sha512-iN9+xdlpOtnTxPExppdMaw0AVhUm6TnqGWtPGY7Nz7rCXWnVg2f96N+SOCMRDbptGn6r5Et+pSVZ6S0HUbF4aQ==" crossorigin=anonymous defer></script>
<script src=/js/vendor/katex/dist/katex.min.ecd6f6c9370917ac9a37e83e3d5a1bd4ad1ee2a1b645223e8d15c7ceaf825e265d23f03561c37f376b64e19b00e0a9f819f718065d3759d4bc7c3c26794d518e.js integrity="sha512-7Nb2yTcJF6yaN+g+PVob1K0e4qG2RSI+jRXHzq+CXiZdI/A1YcN/N2tk4ZsA4Kn4GfcYBl03WdS8fDwmeU1Rjg==" crossorigin=anonymous defer></script>
<script src=/js/vendor/katex/dist/contrib/auto-render.min.bc779bab10cdc862f139e7cd6255a8f021bc483db2b7bc6d553238fb220e937dbe5cd511100d2ab764ee5d9f9092a2cdcc4e6ae109966efc18338f0b275d927d.js integrity="sha512-vHebqxDNyGLxOefNYlWo8CG8SD2yt7xtVTI4+yIOk32+XNUREA0qt2TuXZ+QkqLNzE5q4QmWbvwYM48LJ12SfQ==" crossorigin=anonymous defer></script>
<script src=/main.min.445d91a1473cba7fad6f845ee9cf4bbabd3b5b11558c156885c45b63a3fdb7e749b49b7fcaf1c3679ac6218cfcee94e8c15b4c535952e674fe8ec004b6bd35ad.js integrity="sha512-RF2RoUc8un+tb4Re6c9Lur07WxFVjBVohcRbY6P9t+dJtJt/yvHDZ5rGIYz87pTowVtMU1lS5nT+jsAEtr01rQ==" crossorigin=anonymous defer></script>
<script src=/js/medium-zoom.js integrity crossorigin=anonymous defer></script></body></html>